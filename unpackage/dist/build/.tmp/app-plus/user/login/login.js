(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["user/login/login"],{"0200":function(e,n,o){"use strict";var t=function(){var e=this,n=e.$createElement;e._self._c},i=[];o.d(n,"a",function(){return t}),o.d(n,"b",function(){return i})},"0de7":function(e,n,o){"use strict";(function(e,t){function i(e,n){return s(e)||r(e,n)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function r(e,n){var o=[],t=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(t=(r=s.next()).done);t=!0)if(o.push(r.value),n&&o.length===n)break}catch(u){i=!0,a=u}finally{try{t||null==s["return"]||s["return"]()}finally{if(i)throw a}}return o}function s(e){if(Array.isArray(e))return e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=getApp().globalData,d=o("65f1"),l=d.api,c={data:function(){return{username:"",password:"",version:u.system.version,systemName:u.system.systemName,loading:!1}},methods:{login:function(){var n=this;e.showLoading({title:"正在登录,请稍后",mask:!1}),this.loading=!1;var o=this;e.login().then(function(a){var r=i(a,2),s=r[0],c=r[1];if(console.log(t("微信自动登录：",s,c,u.system.appId," at user\\login\\login.vue:49")),s)return e.hideLoading(),o.loading=!0,void e.showToast({icon:"none",duration:2e3,title:"微信登录失败,请检查网络"});console.log(t(l," at user\\login\\login.vue:60")),l.getOpenId({code:c.code,appId:u.system.appId}).then(function(a){var r=i(a,2),s=r[0],c=r[1],f=c.data.data.openId;u.openId=f,u.serverTime=c.data.data.serverTime,console.log(t("openId解析返回信息：",s,c," at user\\login\\login.vue:70")),null==s&&c.data.data?l.loginOpenid({openId:u.openId}).then(function(a){var r=i(a,2),s=r[0],l=r[1];console.log(t("openid登录",s,l," at user\\login\\login.vue:77")),e.hideLoading(),o.loading=!0,null==s&&l.data.success&&(u.userinfo=l.data.data.userinfo,d.getModelList(u.userinfo.usernumber,n),e.setStorageSync("userinfo",l.data.data.userinfo),e.redirectTo({url:"../index/index"}))}):(e.hideLoading(),o.loading=!0)})})},loginUser:function(){var n=this;console.log(t("手动登录信息:",this.username,this.password,u.openId," at user\\login\\login.vue:100")),e.showLoading({title:"正在登录,请稍后",mask:!1}),u.openId?this.requestLogin():e.login().then(function(o){var a=i(o,2),r=a[0],s=a[1];if(console.log(t("微信登录：",r,s,u.system.appId," at user\\login\\login.vue:110")),r)return e.hideLoading(),void e.showToast({icon:"none",duration:2e3,title:"微信登录失败:"+r.errMsg});l.getOpenId({code:s.code,appId:u.system.appId}).then(function(o){var a=i(o,2),r=a[0],s=a[1];if(console.log(t("openId解析返回信息：",r,s," at user\\login\\login.vue:126")),null==r&&s.data.data){var l=s.data.data.openId;u.openId=l,u.serverTime=s.data.data.serverTime,console.log(t("登录中...",s," at user\\login\\login.vue:131")),u.userinfo=s.data.data.userinfo,d.getModelList(u.userinfo.usernumber,n),e.setStorageSync("userinfo",s.data.data.userinfo),n.requestLogin()}else e.hideLoading(),e.showToast({icon:"none",duration:2e3,title:"登录失败:"+r.errMsg})})})},requestLogin:function(){var n=this,o=this;l.login({loginid:o.username,pwd:o.password,openid:u.openId}).then(function(o){var a=i(o,2),r=a[0],s=a[1];console.log(t("登录信息:",r,s," at user\\login\\login.vue:159")),e.hideLoading(),r&&e.showToast({icon:"none",duration:3e3,title:"登录失败:"+s.data.errmsg}),s.data.success?(console.log(t("登录成功",s.data," at user\\login\\login.vue:169")),u.userinfo=s.data.data.userinfo,e.setStorageSync("userinfo",s.data.data.userinfo),d.getModelList(u.userinfo.usernumber,n),e.redirectTo({url:"../index/index"})):e.showToast({icon:"none",duration:3e3,title:"登录失败:"+s.data.errmsg})})}},onShow:function(){if(e.getStorageSync("userinfo"))return u.userinfo=e.getStorageSync("userinfo"),d.getModelList(u.userinfo.usernumber,this),void e.redirectTo({url:"../index/index"});this.login()},onShareAppMessage:function(){return{path:"user/login/login"}}};n.default=c}).call(this,o("6e42")["default"],o("0de9")["default"])},"18ac":function(e,n,o){"use strict";(function(e){o("7085");t(o("66fd"));var n=t(o("4229"));function t(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,o("6e42")["createPage"])},4229:function(e,n,o){"use strict";o.r(n);var t=o("0200"),i=o("42df");for(var a in i)"default"!==a&&function(e){o.d(n,e,function(){return i[e]})}(a);o("8fa2"),o("483e");var r=o("2877"),s=Object(r["a"])(i["default"],t["a"],t["b"],!1,null,"3e44bd80",null);n["default"]=s.exports},"42df":function(e,n,o){"use strict";o.r(n);var t=o("0de7"),i=o.n(t);for(var a in t)"default"!==a&&function(e){o.d(n,e,function(){return t[e]})}(a);n["default"]=i.a},"483e":function(e,n,o){"use strict";var t=o("6241"),i=o.n(t);i.a},6241:function(e,n,o){},"8fa2":function(e,n,o){"use strict";var t=o("f354"),i=o.n(t);i.a},f354:function(e,n,o){}},[["18ac","common/runtime","common/vendor"]]]);