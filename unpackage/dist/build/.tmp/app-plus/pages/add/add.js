(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/add/add"],{"026f":function(t,e,n){"use strict";n.r(e);var r=n("f649"),i=n("53f2");for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);n("0532");var o=n("2877"),l=Object(o["a"])(i["default"],r["a"],r["b"],!1,null,"2adcf6a8",null);e["default"]=l.exports},"0532":function(t,e,n){"use strict";var r=n("d8c4"),i=n.n(r);i.a},1737:function(t,e,n){"use strict";(function(t,r){function i(t,e){return l(t)||o(t,e)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,l=t[Symbol.iterator]();!(r=(o=l.next()).done);r=!0)if(n.push(o.value),e&&n.length===e)break}catch(d){i=!0,a=d}finally{try{r||null==l["return"]||l["return"]()}finally{if(i)throw a}}return n}function l(t){if(Array.isArray(t))return t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var d=n("65f1"),s=d.request,u={data:function(){return{popup:!0,textHeight:"136",title:"",titleFoc:!1,desc:"",descFoc:!1,imgNumber:9,upImgIndex:0,upImgList:[],btnClick:!0}},computed:{departmentList:function(){return this.$store.state.market.addMarket.departmentList},person:function(){var e=this.$store.state.market.addMarket.person,n=(e.leaderlist,e.deptuserlist),r=[];console.log(t(this.$store.state.market.addMarket.person," at pages\\add\\add.vue:82"));var i=!0,a=!1,o=void 0;try{for(var l,d=n[Symbol.iterator]();!(i=(l=d.next()).done);i=!0){var s=l.value,u=!0,c=!1,f=void 0;try{for(var p,v=s.userlist[Symbol.iterator]();!(u=(p=v.next()).done);u=!0){var h=p.value;r.push(h)}}catch(k){c=!0,f=k}finally{try{u||null==v.return||v.return()}finally{if(c)throw f}}}}catch(k){a=!0,o=k}finally{try{i||null==d.return||d.return()}finally{if(a)throw o}}var m=!0,g=!1,y=void 0;try{for(var b,w=n[Symbol.iterator]();!(m=(b=w.next()).done);m=!0){var S=b.value;r.push(S)}}catch(k){g=!0,y=k}finally{try{m||null==w.return||w.return()}finally{if(g)throw y}}return r}},onShow:function(){this.$forceUpdate()},methods:{resetForm:function(){var t=this.departmentList,e=!0,n=!1,r=void 0;try{for(var i,a=t[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value;o.select=!1}}catch($){n=!0,r=$}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}this.$store.commit("setAddDepart",t);var l=this.$store.state.market.addMarket.person,d=l.leaderlist,s=l.deptuserlist,u=!0,c=!1,f=void 0;try{for(var p,v=d[Symbol.iterator]();!(u=(p=v.next()).done);u=!0){var h=p.value;h.select=!1}}catch($){c=!0,f=$}finally{try{u||null==v.return||v.return()}finally{if(c)throw f}}var m=!0,g=!1,y=void 0;try{for(var b,w=s[Symbol.iterator]();!(m=(b=w.next()).done);m=!0){var S=b.value,k=!0,x=!1,C=void 0;try{for(var L,I=S.userlist[Symbol.iterator]();!(k=(L=I.next()).done);k=!0){var M=L.value;M.select=!1}}catch($){x=!0,C=$}finally{try{k||null==I.return||I.return()}finally{if(x)throw C}}}}catch($){g=!0,y=$}finally{try{m||null==w.return||w.return()}finally{if(g)throw y}}l={leaderlist:d,deptuserlist:s},this.$store.commit("setAddPerson",l)},sortArr:function(t){for(var e=0;e<t.length;e++)for(var n=e+1;n<t.length;n++)t[e].deptid==t[n].deptid&&(t.splice(n,1),n--);return t},add:function(){var e=this;if(this.btnClick){this.btnClick=!1,r.showLoading({title:"正在添加巡检...",mask:!0});var n=this,a={loginspection:{inspectionlogid:0,inspectionid:0,typedesc:"",deptid:r.getStorageSync("userinfo").deptid,deptname:r.getStorageSync("userinfo").deptname,title:this.title,insertdate:"",inspectionplace:"",remark:this.desc,status:0,usernumber:r.getStorageSync("userinfo").usernumber,username:r.getStorageSync("userinfo").username,lstupdatedate:"",lstuserid:"",other1:"",other2:"",confirmuserid:"",confirmdate:"",loginspectionimg:[],loginspectionquestion:[],loginspectiontype:[],mapinspectiondept:[],mapinspectionuser:[]}};console.log(t(a," at pages\\add\\add.vue:220"));var o=[],l=!0,d=!1,u=void 0;try{for(var c,f=this.person[Symbol.iterator]();!(l=(c=f.next()).done);l=!0){var p=c.value;if(1==p.select){o.push(p);var v={miuid:0,inspectionlogid:0,userid:p.userid,usernumber:p.usernumber,username:p.username,mobile:"",deptid:p.deptid,deptname:p.deptname,insertdate:""};a.loginspection.mapinspectionuser.push(v)}}}catch(N){d=!0,u=N}finally{try{l||null==f.return||f.return()}finally{if(d)throw u}}var h=[],m=!0,g=!1,y=void 0;try{for(var b,w=this.departmentList[Symbol.iterator]();!(m=(b=w.next()).done);m=!0){var S=b.value;1==S.select&&h.push(S)}}catch(N){g=!0,y=N}finally{try{m||null==w.return||w.return()}finally{if(g)throw y}}h=this.sortArr(h.concat(o)),console.log(t(h," at pages\\add\\add.vue:247"));var k=!0,x=!1,C=void 0;try{for(var L,I=h[Symbol.iterator]();!(k=(L=I.next()).done);k=!0){var M=L.value,$={mapinspectiondeptid:0,inspectionlogid:0,deptid:M.deptid,deptname:M.deptname,insertdate:""};a.loginspection.mapinspectiondept.push($)}}catch(N){x=!0,C=N}finally{try{k||null==I.return||I.return()}finally{if(x)throw C}}var A=!0,F=!1,_=void 0;try{for(var T,J=this.upImgList[Symbol.iterator]();!(A=(T=J.next()).done);A=!0){var O=T.value,H={inspectionimgid:0,inspectionlogid:0,imgurl:O.path,uploadtime:""};a.loginspection.loginspectionimg.push(H)}}catch(N){F=!0,_=N}finally{try{A||null==J.return||J.return()}finally{if(F)throw _}}if(!this.desc)return r.hideLoading(),this.btnClick=!0,void r.showModal({title:"",content:"请填写巡检描述！",showCancel:!1,success:function(){n.descFoc=!0}});if(!a.loginspection.mapinspectiondept.length&&!a.loginspection.mapinspectionuser.length)return r.hideLoading(),this.btnClick=!0,void r.showModal({title:"",content:"请选择通知部门！",showCancel:!1});if(!a.loginspection.mapinspectionuser.length&&!a.loginspection.mapinspectiondept.length)return r.hideLoading(),this.btnClick=!0,void r.showModal({title:"",content:"请选择通知人员！",showCancel:!1});console.log(t("开始添加巡检记录",a," at pages\\add\\add.vue:314")),console.log(t("开始添加巡检记录JSON",JSON.stringify(a)," at pages\\add\\add.vue:315")),s.addDetail(a).then(function(n){r.hideLoading();var a=i(n,2),o=a[0],l=a[1];if(console.log(t("添加结果：",o,n," at pages\\add\\add.vue:319")),null!=o||!l.data.success)return e.btnClick=!0,void r.showToast({icon:"none",duration:3e3,title:l.data.errmsg});r.showToast({icon:"success",title:"添加成功"}),e.btnClick=!0,r.navigateBack({delta:1})})}},addImg:function(){d.addImg(this)},delImg:function(t){d.delImg(t,this)},addFrom:function(e){console.log(t("添加图表"," at pages\\add\\add.vue:348")),r.navigateTo({url:"../addSelect/addSelect?type="+e})}},onHide:function(){console.log(t("add onHide"," at pages\\add\\add.vue:355"))},onUnload:function(){console.log(t("add onUnload"," at pages\\add\\add.vue:358")),this.$store.commit("changeTabbar",2),this.resetForm()}};e.default=u}).call(this,n("0de9")["default"],n("6e42")["default"])},"53f2":function(t,e,n){"use strict";n.r(e);var r=n("1737"),i=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);e["default"]=i.a},"87c4":function(t,e,n){"use strict";(function(t){n("7085");r(n("66fd"));var e=r(n("026f"));function r(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},d8c4:function(t,e,n){},f649:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i})}},[["87c4","common/runtime","common/vendor"]]]);